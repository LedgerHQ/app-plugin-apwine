import { processTest, populateTransaction } from './test.fixture';

const contractName = 'AdminUpgradeabilityProxy';

const testLabel = 'swapExactAmountIn'; // <= Name of the test
const testNetwork = 'polygon';
const signedPlugin = false;
const chainID = 137;

const contractAddr = '0x790a0ca839dc5e4690c8c58cb57fd2beca419afc';

const transactions = [
    {
        // FROM : https://polygonscan.com/tx/0xdeedc4133fe61dbbd86d0fce3ad87c453982ce7f4b442a381d206ee72f5cffe6
        contract: '90D-StakeDAO-sdam3CRV',
        inputData: '0xe7ffb5f7000000000000000000000000c68b6987075944f9e8b0a6c2b52e923bc1fb90280000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000002544f49ae426458d9d0000000000000000000000000000000000000000000000009d22687441e9a16c00000000000000000000000004e5b03ac3867124c0ecf5f079cf68abbd158ff7000000000000000000000000000000000000000000000000000001810f830ded000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000',
        nanosSteps: 13,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0x96a02c127d312260c5dc4c1fe7381c9f820e06801f5664a091079f12f83e2c2f
        contract: '90D-Beefy-mooCurveATriCrypto3',
        inputData: '0xe7ffb5f70000000000000000000000001604c5e9ab488d66e983644355511dcef5c32edf0000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000002c68af0bb140000000000000000000000000000000000000000000000000000a3121d7c1260d3d6000000000000000000000000abc508dda7517f195e416d77c822a4861961947a00000000000000000000000000000000000000000000000000000181299dfccb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 14,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0x12c2c92a86c63083540ffbde586df04433037cdd95f213443e60d10ed3816f29
        contract: '90D-Beefy-mooMaiUSDC-miMATIC',
        inputData: '0xe7ffb5f70000000000000000000000004bf982f43994033e8c4e2c36d00c776b550e76c3000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000015ed647b132ade0000000000000000000000000000000000000000000000000000948797b382ff00000000000000000000000020665e0b5fb3e81abefa4d2ab515bdf0e6fa67000000000000000000000000000000000000000000000000000000018128ef3990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000',
        nanosSteps: 15,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0x8b5245868d1d5d9ba04c7933d18065d66ffd45128e390b85aaa512555bb711b1
        contract: '90D-Beefy-mooJarvis4eur',
        inputData: '0xe7ffb5f700000000000000000000000091e94e5e3baa054f92bac48a9c05e6228de1fcac000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000088c68f412c18975b800000000000000000000000000000000000000000000000848eff64dd02e60a6000000000000000000000000bc3a058d1c919f6b1f48e8846246d04d467902c80000000000000000000000000000000000000000000000000000018122848ce9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 12,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0xd46263d095a338a6a6aa892d7fe2ac4efceb6ab3591d7302ca0d240b222a23ec
        contract: '90D-Harvest-bfBP-BTC-SP',
        inputData: '0xe7ffb5f70000000000000000000000002df9cf57ac79a76a2e8d944b623a9f324af85ab800000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000002a623f9e88ad2d000000000000000000000000000000000000000000000000002a8483869f561f0000000000000000000000002754178a3ca7987eddf56e7b98e8084986748b000000000000000000000000000000000000000000000000000000018135836493000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000',
        nanosSteps: 12,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0x9a6f756c61df282de6d22d0a7eed022ee52cad817bfe5fac960fe7e97a8d7f6e
        contract: '90D-Aave-amUSDC',
        inputData: '0xe7ffb5f70000000000000000000000008a362aa1c81ed0ee2ae677a8b59e0f563dd290ba000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000005fd400f0000000000000000000000000000000000000000000000000000000005ce0968000000000000000000000000bc3a058d1c919f6b1f48e8846246d04d467902c80000000000000000000000000000000000000000000000000000018122451f5c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 9,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0x23840400584520a3260f45243a316ab319c6a1962f93bb459af73ebb5e47607e
        contract: '90D-Beefy-mooJarvis2jpy',
        inputData: '0xe7ffb5f70000000000000000000000007429e160aa4ab7bbec65c101bd2624c8cba8a2f60000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000003c9b55c5f6ac672839000000000000000000000000000000000000000000000039ad2980806cb20a9b0000000000000000000000009aa925ac991311cf5b43bd659e57ac811791632400000000000000000000000000000000000000000000000000000180e6415699000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 12,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
];

transactions.forEach((tx) => {
    const devices = [
        {
            name: 'nanos',
            label: 'Nano S',
            steps: tx.nanosSteps, // <= Define the number of steps for this test case and this device
        },
        {
            name: 'nanox',
            label: 'Nano X',
            steps: tx.nanoxSteps, // <= Define the number of steps for this test case and this device
        },
        {
            name: 'nanosp',
            label: 'Nano S+',
            steps: tx.nanospSteps, // <= Define the number of steps for this test case and this device
        },
    ];

    const testDirSuffix = `swap_exact_amount_in_${tx.contract}`; // <= directory to compare device snapshots to
    const serializedTx = populateTransaction(contractAddr, tx.inputData, chainID);
    devices.forEach((device) => processTest(device, contractName, `${testLabel}_${tx.contract}`, testDirSuffix, '', signedPlugin, serializedTx, testNetwork));
});
