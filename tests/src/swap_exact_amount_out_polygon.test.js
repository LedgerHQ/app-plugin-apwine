import { processTest, populateTransaction } from './test.fixture';

const contractName = 'AdminUpgradeabilityProxy';

const testLabel = 'swapExactAmountOut'; // <= Name of the test
const testNetwork = 'polygon';
const signedPlugin = false;
const chainID = 137;

const contractAddr = '0x790a0ca839dc5e4690c8c58cb57fd2beca419afc';

const transactions = [
    {
        // FROM : https://polygonscan.com/tx/0x916474978eb5f38fb2af920f59c234dca429769ebbc6b3dbe5cdabd36bbb2c31
        contract: '90D-StakeDAO-sdam3CRV',
        inputData: '0x16dc3ace000000000000000000000000c68b6987075944f9e8b0a6c2b52e923bc1fb902800000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000043efe91159286aea0e000000000000000000000000000000000000000000000e91a7cd19fa3b0000000000000000000000000000005065b5efe2c247018a77cac051cca716b4488029000000000000000000000000000000000000000000000000000001812a09f78a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 12,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0xe42c518d42b477c0c243df769136945129bc08a736139107715696303c59a735
        contract: '90D-Beefy-mooCurveATriCrypto3',
        inputData: '0x16dc3ace0000000000000000000000001604c5e9ab488d66e983644355511dcef5c32edf000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000007157491986df700000000000000000000000000000000000000000000000000b1a2bc2ec50000000000000000000000000000bc3a058d1c919f6b1f48e8846246d04d467902c80000000000000000000000000000000000000000000000000000018122745dba000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 14,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0x938133bfcf9f57267ae944070122881f52f4ff948f5f44edae822f47ef81791e
        contract: '90D-Beefy-mooMaiUSDC-miMATIC',
        inputData: '0x16dc3ace0000000000000000000000004bf982f43994033e8c4e2c36d00c776b550e76c3000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000181291ed8f2400000000000000000000000000000000000000000000000000019251aed3e643000000000000000000000000bf6eceee361fbbf25df99b309046519b7ae4bd490000000000000000000000000000000000000000000000000000017f9108ff24000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 13,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0x82388ddc744d0e12e61b78f4e996583b2ba762c6cfa425e1facd11ada3215b4d
        contract: '90D-Beefy-mooJarvis4eur',
        inputData: '0x16dc3ace00000000000000000000000091e94e5e3baa054f92bac48a9c05e6228de1fcac00000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000001560e0238324a1664000000000000000000000000000000000000000000000044fd19cdf041ddec040000000000000000000000002c640ac98e293daa246f98d2828e328a06fa693600000000000000000000000000000000000000000000000000000180c7c115ca000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 12,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0x728e5aa63ed2d83399c13e01997933028b95579a32a6e47605cc2f7ff84e2756
        contract: '90D-Harvest-bfBP-BTC-SP',
        inputData: '0x16dc3ace0000000000000000000000002df9cf57ac79a76a2e8d944b623a9f324af85ab80000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000032196d1183716000000000000000000000000000000000000000000000000004380663abb8000000000000000000000000000d6b2095e913695dd10c071cc2f20247e921efb8e0000000000000000000000000000000000000000000000000000017f94472c27000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 11,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0x534cbfbc067b27d03992d1be59591567d61c9d4a05d49a2c43b61a512aafcb34
        contract: '90D-Aave-amUSDC',
        inputData: '0x16dc3ace0000000000000000000000008a362aa1c81ed0ee2ae677a8b59e0f563dd290ba00000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000028a04f000000000000000000000000000000000000000000000000000000000a21fe80000000000000000000000000bc3a058d1c919f6b1f48e8846246d04d467902c800000000000000000000000000000000000000000000000000000180dfd5d140000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 9,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
    {
        // FROM : https://polygonscan.com/tx/0xb380c195ec456146cc86505dda21fcca30992e4e3c7eaf221c230dac4b914ed0
        contract: '90D-Beefy-mooJarvis2jpy',
        inputData: '0x16dc3ace0000000000000000000000007429e160aa4ab7bbec65c101bd2624c8cba8a2f6000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000003b0640109ece92ee0000000000000000000000000000000000000000000000056bc75e2d63100000000000000000000000000000bc3a058d1c919f6b1f48e8846246d04d467902c800000000000000000000000000000000000000000000000000000180e96040e2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001',
        nanosSteps: 12,
        nanospSteps: 8,
        nanoxSteps: 8,
    },
];

transactions.forEach((tx) => {
    const devices = [
        {
            name: 'nanos',
            label: 'Nano S',
            steps: tx.nanosSteps, // <= Define the number of steps for this test case and this device
        },
        {
            name: 'nanox',
            label: 'Nano X',
            steps: tx.nanoxSteps, // <= Define the number of steps for this test case and this device
        },
        {
            name: 'nanosp',
            label: 'Nano S+',
            steps: tx.nanospSteps, // <= Define the number of steps for this test case and this device
        },
    ];

    const testDirSuffix = `swap_exact_amount_out_${tx.contract}`; // <= directory to compare device snapshots to
    const serializedTx = populateTransaction(contractAddr, tx.inputData, chainID);
    devices.forEach((device) => processTest(device, contractName, `${testLabel}_${tx.contract}`, testDirSuffix, '', signedPlugin, serializedTx, testNetwork));
});
